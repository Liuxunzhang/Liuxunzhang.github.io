<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"zhoumuyun.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="介绍Linux日志分析工具的使用">
<meta property="og:type" content="article">
<meta property="og:title" content="linux日志分析工具介绍">
<meta property="og:url" content="http://zhoumuyun.com/2024/07/15/linux%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7%E4%BB%8B%E7%BB%8D/index.html">
<meta property="og:site_name" content="Error">
<meta property="og:description" content="介绍Linux日志分析工具的使用">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-07-14T16:41:31.000Z">
<meta property="article:modified_time" content="2024-07-14T16:45:37.143Z">
<meta property="article:author" content="Zhou muyun">
<meta property="article:tag" content="应急工具">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://zhoumuyun.com/2024/07/15/linux%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7%E4%BB%8B%E7%BB%8D/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>linux日志分析工具介绍 | Error</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>
    <a target="_blank" rel="noopener" href="https://Liuxunzhang/Liuxunzhang.github.io" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Error</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://zhoumuyun.com/2024/07/15/linux%E6%97%A5%E5%BF%97%E5%88%86%E6%9E%90%E5%B7%A5%E5%85%B7%E4%BB%8B%E7%BB%8D/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar2.gif">
      <meta itemprop="name" content="Zhou muyun">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Error">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          linux日志分析工具介绍
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2024-07-15 00:41:31 / 修改时间：00:45:37" itemprop="dateCreated datePublished" datetime="2024-07-15T00:41:31+08:00">2024-07-15</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>介绍Linux日志分析工具的使用</p>
<span id="more"></span>

<h1 id="单独工具介绍"><a href="#单独工具介绍" class="headerlink" title="单独工具介绍"></a>单独工具介绍</h1><h2 id="Find"><a href="#Find" class="headerlink" title="Find"></a>Find</h2><p> <code>find</code> 是一个在 Linux 和 Unix 系统中用于搜索文件系统中文件的命令行工具。它可以基于各种条件来查找文件，比如文件名、文件类型、大小、权限、所有者、修改日期等。<code>find</code> 是一个功能强大且灵活的工具，非常适合执行复杂的搜索任务。</p>
<h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find [路径] [选项] [操作]</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>路径</strong>：指定 <code>find</code> 命令开始搜索的目录路径。如果没有指定路径，<code>find</code> 默认在当前目录及其子目录下搜索。</li>
<li><strong>选项</strong>：定义搜索条件。<code>find</code> 可以使用多个条件来精确匹配所需的文件。</li>
<li><strong>操作</strong>：对找到的文件执行的操作。如果不指定操作，默认操作是打印所有找到的文件路径到标准输出。</li>
</ul>
<h3 id="常见选项"><a href="#常见选项" class="headerlink" title="常见选项"></a>常见选项</h3><ul>
<li><code>-name</code>：根据文件名搜索。</li>
<li><code>-type</code>：根据文件类型搜索（例如：<code>-type f</code> 仅搜索普通文件，<code>-type d</code> 仅搜索目录）。</li>
<li><code>-size</code>：根据文件大小搜索。</li>
<li><code>-perm</code>：根据文件权限搜索。</li>
<li><code>-user</code>：根据文件所有者搜索。</li>
<li><code>-group</code>：根据文件所属的组搜索。</li>
<li><code>-mtime</code>, <code>-atime</code>, <code>-ctime</code>：根据修改时间、访问时间或状态变化时间搜索。</li>
<li><code>-exec</code>：对搜索到的文件执行指定的命令。</li>
</ul>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><ol>
<li><strong>搜索当前目录及子目录下所有的</strong> <code>**.txt**</code> <strong>文件</strong>：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find . -<span class="built_in">type</span> f -name <span class="string">&quot;*.txt&quot;</span></span><br></pre></td></tr></table></figure>

<ol>
<li><strong>搜索</strong> <code>**/home**</code> <strong>目录下所有属于用户</strong> <code>**bob**</code> <strong>的文件</strong>：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /home -<span class="built_in">type</span> f -user bob</span><br></pre></td></tr></table></figure>

<ol>
<li><strong>搜索</strong> <code>**/var/log**</code> <strong>目录下最近7天内被修改过的文件</strong>：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /var/log -<span class="built_in">type</span> f -mtime -7</span><br></pre></td></tr></table></figure>

<ol>
<li><strong>删除</strong> <code>**/tmp**</code> <strong>目录下所有</strong> <code>**.tmp**</code> <strong>文件</strong>：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /tmp -<span class="built_in">type</span> f -name <span class="string">&quot;*.tmp&quot;</span> -<span class="built_in">exec</span> <span class="built_in">rm</span> &#123;&#125; \;</span><br></pre></td></tr></table></figure>


<p>在这个命令中，<code>-exec</code> 后面的 <code>&#123;&#125;</code> 是找到的文件名的占位符，<code>\;</code> 表示 <code>-exec</code> 参数的结束。 </p>
<ol>
<li><strong>搜索大小超过50MB的文件</strong>：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -<span class="built_in">type</span> f -size +50M</span><br></pre></td></tr></table></figure>

<h2 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h2><h3 id="基本语法-1"><a href="#基本语法-1" class="headerlink" title="基本语法"></a>基本语法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep [options] pattern [file...]</span><br></pre></td></tr></table></figure>



<ul>
<li><code>pattern</code>：要搜索的文本模式。这可以是普通字符串或正则表达式。</li>
<li><code>file...</code>：要搜索的文件名列表。如果未指定文件，<code>grep</code> 通常会从标准输入读取。</li>
</ul>
<h3 id="常用选项"><a href="#常用选项" class="headerlink" title="常用选项"></a>常用选项</h3><ul>
<li><code>-i</code>：忽略大小写。</li>
<li><code>-v</code>：反向匹配，选择不包含指定模式的行。</li>
<li><code>-r</code> 或 <code>-R</code>：递归搜索，查找所有文件。</li>
<li><code>-l</code>：只打印包含匹配模式的文件名，而不是匹配的文本行。</li>
<li><code>-n</code>：打印每个匹配行的行号。</li>
<li><code>-c</code>：统计匹配模式的行数，而不是打印匹配的行。</li>
<li><code>-e</code>：允许使用多个搜索模式。</li>
<li><code>-o</code>：只输出匹配模式的部分，而不是整行。</li>
</ul>
<h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h3><ol>
<li><strong>搜索文件中的文本</strong><br>查找文件 <code>file.txt</code> 中包含 “example” 的所有行：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">&quot;example&quot;</span> file.txt</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>忽略大小写地搜索</strong><br>查找文件中包含 “example”（无论大小写）的所有行：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -i <span class="string">&quot;example&quot;</span> file.txt</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>反向匹配</strong><br>选择不包含 “example” 的行：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -v <span class="string">&quot;example&quot;</span> file.txt</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><strong>递归搜索</strong><br>在当前目录及子目录下搜索包含 “example” 的所有 <code>.txt</code> 文件：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -r <span class="string">&quot;example&quot;</span> *.txt</span><br></pre></td></tr></table></figure>

<ol start="5">
<li><strong>打印匹配行的行号</strong><br>打印 <code>file.txt</code> 内容中包含 “example” 的行及其行号：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -n <span class="string">&quot;example&quot;</span> file.txt</span><br></pre></td></tr></table></figure>

<ol start="6">
<li><strong>统计匹配行的数量</strong><br>获取文件中包含 “example” 的行数：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -c <span class="string">&quot;example&quot;</span> file.txt</span><br></pre></td></tr></table></figure>

<ol start="7">
<li><strong>使用多个模式</strong><br>查找文件中包含 “example” 或 “test” 的行：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -e <span class="string">&quot;example&quot;</span> -e <span class="string">&quot;test&quot;</span> file.txt</span><br></pre></td></tr></table></figure>

<ol start="8">
<li><strong>只输出匹配到的文本部分</strong><br>如果一行中包含多次出现的模式，只打印匹配到的模式部分，而非整行：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -o <span class="string">&quot;ex[a-z]*&quot;</span> file.txt</span><br></pre></td></tr></table></figure>

<ol start="9">
<li><strong>强行匹配</strong></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -a &quot;search_pattern&quot; file</span><br></pre></td></tr></table></figure>



<ol start="10">
<li><strong>提取ip</strong></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -oP &#x27;(?&lt;=from )(\d&#123;1,3&#125;\.)&#123;3&#125;\d&#123;1,3&#125;&#x27; your_log_file.log</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>-o</strong> 选项告诉<strong>grep</strong>仅输出与正则表达式匹配的部分。</li>
<li><strong>-P</strong> 选项启用PCRE。</li>
<li>正则表达式**(?&lt;&#x3D;from )(\d{1,3}.){3}\d{1,3}**查找 ‘from ‘ 之后跟随的IP地址。</li>
</ul>
<h2 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h2><h3 id="基本语法-2"><a href="#基本语法-2" class="headerlink" title="基本语法"></a>基本语法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wc</span> [OPTION]... [FILE]...</span><br></pre></td></tr></table></figure>



<ul>
<li><code>OPTION</code>：选择计数的模式，包括行数、单词数、字符数等。</li>
<li><code>FILE</code>：指定一个或多个文件名。如果没有指定文件或文件为<code>-</code>，<code>wc</code> 会从标准输入读取。</li>
</ul>
<h3 id="常见选项-1"><a href="#常见选项-1" class="headerlink" title="常见选项"></a>常见选项</h3><ul>
<li><code>-l</code>：只计算行数。</li>
<li><code>-w</code>：只计算单词数（以空白字符分隔的字符串）。</li>
<li><code>-c</code>：只计算字节数。</li>
<li><code>-m</code>：只计算字符数。与 <code>-c</code> 的区别在于处理多字节字符时的统计方式不同。</li>
</ul>
<h3 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h3><ol>
<li><strong>计算文件的行数</strong><br>如果你想知道一个文件中包含多少行：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wc</span> -l file.txt</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>计算文件的单词数</strong><br>获取文件中单词的总数：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wc</span> -w file.txt</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>计算文件的字节数</strong><br>查看文件占用了多少字节：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wc</span> -c file.txt</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><strong>计算文件的字符数</strong><br>统计文件中字符的总数：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wc</span> -m file.txt</span><br></pre></td></tr></table></figure>

<ol start="5">
<li><strong>对多个文件进行统计</strong><br>你可以同时对多个文件进行统计，并且 <code>wc</code> 会提供每个文件的统计数和一个总计数：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wc</span> file1.txt file2.txt</span><br></pre></td></tr></table></figure>

<ol start="6">
<li><strong>结合使用其他命令</strong><br><code>wc</code> 常与管道一起使用，以统计其他命令的输出。例如，统计当前目录下文件的数量：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> | <span class="built_in">wc</span> -l</span><br></pre></td></tr></table></figure>

<h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><h3 id="基本语法-3"><a href="#基本语法-3" class="headerlink" title="基本语法"></a>基本语法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;pattern &#123;action&#125;&#x27;</span> input-file(s)</span><br></pre></td></tr></table></figure>



<ul>
<li><code>pattern</code>：指定一个条件，只有满足条件的行才执行大括号中的 <code>action</code>。</li>
<li><code>action</code>：一组命令，当行匹配 <code>pattern</code> 时，执行这些命令。</li>
</ul>
<h3 id="常见选项-2"><a href="#常见选项-2" class="headerlink" title="常见选项"></a>常见选项</h3><ul>
<li><code>-F</code>：指定输入文件的字段分隔符。</li>
<li><code>-v</code>：定义一个变量。</li>
<li><code>-f</code>：从脚本文件中读取 <code>awk</code> 程序。</li>
</ul>
<h3 id="示例-3"><a href="#示例-3" class="headerlink" title="示例"></a>示例</h3><ol>
<li><strong>打印文件的每一行</strong></li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;print&#125;&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>打印文件特定列</strong><br>打印第一列和第三列：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;print $1, $3&#125;&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>使用自定义字段分隔符</strong><br>使用逗号作为分隔符，打印第二列：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">awk -F, <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> file.txt</span><br><span class="line">awk -F<span class="string">&quot;notty&quot;</span> <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> btmp.1</span><br><span class="line">-F 后面不能接空格， &#123;&#125;外面只能接单引号  </span><br></pre></td></tr></table></figure>

<ol start="4">
<li><strong>条件过滤和打印</strong><br>打印第三列大于100的所有行：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;$3 &gt; 100 &#123;print&#125;&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>

<ol start="5">
<li><strong>对列值求和</strong><br>对第二列的所有值求和：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;sum += $2&#125; END &#123;print sum&#125;&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>

<ol start="6">
<li><strong>使用正则表达式</strong><br>打印包含 “success” 的行：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;/success/ &#123;print&#125;&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>

<ol start="7">
<li><strong>格式化输出</strong><br>按格式打印多列：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;printf &quot;Name: %s, ID: %s\n&quot;, $1, $2&#125;&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>

<ol start="8">
<li><strong>传递外部变量给</strong> <code>**awk**</code><br>将 shell 变量传递给 <code>awk</code>：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name=<span class="string">&quot;Alice&quot;</span></span><br><span class="line">awk -v name=<span class="string">&quot;<span class="variable">$name</span>&quot;</span> <span class="string">&#x27;$1 == name &#123;print&#125;&#x27;</span> file.txt</span><br></pre></td></tr></table></figure>

<ol start="9">
<li><strong>从</strong> <code>**awk**</code> <strong>脚本文件中执行</strong><br>先创建一个 <code>awk</code> 脚本文件 <code>filter.awk</code>:</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$1 &gt; 100</span><br></pre></td></tr></table></figure>


<p>然后执行： </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -f filter.awk file.txt</span><br></pre></td></tr></table></figure>

<ol start="10">
<li>提取ip</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;/Failed password for root/ &#123;print $11&#125;&#x27; your_log_file.log</span><br></pre></td></tr></table></figure>

<p>这里：</p>
<ul>
<li><strong>&#x2F;Failed password for root&#x2F;</strong> 是匹配条件，<strong>awk</strong>只会对包含这个字符串的行进行操作。</li>
<li><strong>{print $11}</strong> 是动作部分，告诉<strong>awk</strong>打印每行的第11个字段（空格区分字段），根据你的日志样本，IP地址恰好是第11个字段。</li>
</ul>
<ol start="11">
<li>把’,’换成换行符(\n)</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;gsub(&quot;, &quot;, &quot;\n&quot;, $0); print $0&#125;&#x27;</span><br></pre></td></tr></table></figure>

<h2 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h2><h3 id="基本语法-4"><a href="#基本语法-4" class="headerlink" title="基本语法"></a>基本语法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uniq</span> [OPTION]... [INPUT [OUTPUT]]</span><br></pre></td></tr></table></figure>



<ul>
<li><code>OPTION</code>：控制 <code>uniq</code> 的行为。</li>
<li><code>INPUT</code>：指定输入文件。如果未指定或为 <code>-</code>，则从标准输入读取。</li>
<li><code>OUTPUT</code>：指定输出文件。如果未指定，结果输出到标准输出。</li>
</ul>
<h3 id="常见选项-3"><a href="#常见选项-3" class="headerlink" title="常见选项"></a>常见选项</h3><ul>
<li><code>-c</code>：前置行数，显示每行在文件中出现的次数。</li>
<li><code>-d</code>：只打印重复行，每个重复组只打印一次。</li>
<li><code>-u</code>：仅显示唯一行。</li>
<li><code>-i</code>：忽略大小写差异比较行。</li>
</ul>
<h3 id="示例-4"><a href="#示例-4" class="headerlink" title="示例"></a>示例</h3><ol>
<li><strong>检测重复行</strong><br>只显示文件中的重复行：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> file.txt | <span class="built_in">uniq</span> -d</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>计数每行出现的次数</strong><br>对文件排序后，计数每行出现的次数：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> file.txt | <span class="built_in">uniq</span> -c</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>显示唯一的行</strong><br>显示文件中唯一的行：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> file.txt | <span class="built_in">uniq</span> -u</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><strong>忽略大小写比较重复的行</strong><br>在进行重复行检测时忽略大小写：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> file.txt | <span class="built_in">uniq</span> -i -d</span><br></pre></td></tr></table></figure>

<ol start="5">
<li><strong>组合</strong><code>**sort**</code><strong>和</strong><code>**uniq**</code><strong>进行去重</strong><br>将排序和去重合并输出到另一个文件：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> file.txt | <span class="built_in">uniq</span> &gt; sorted_unique_file.txt</span><br></pre></td></tr></table></figure>

<ol start="6">
<li><strong>使用自定义输出</strong><br>检测重复行并将结果输出到指定文件：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> file.txt | <span class="built_in">uniq</span> -d -o output.txt</span><br></pre></td></tr></table></figure>


<p>注意：<code>-o</code> 选项实际上并不存在于 <code>uniq</code> 命令中。输出通常是通过重定向完成的，上面的命令应该修正为没有 <code>-o</code> 的版本，直接使用 <code>&gt;</code> 进行重定向。 </p>
<p><code>uniq</code> 命令的强大之处在于其简便性和与<code>sort</code>命令结合使用时的效能。了解如何有效使用这些工具，可以极大提高你的文本处理能力，特别是在处理大型数据集时。</p>
<h2 id="Sort"><a href="#Sort" class="headerlink" title="Sort"></a>Sort</h2><h3 id="基本语法-5"><a href="#基本语法-5" class="headerlink" title="基本语法"></a>基本语法</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> [OPTION]... [FILE]...</span><br></pre></td></tr></table></figure>



<ul>
<li><code>OPTION</code>：控制排序行为的命令行选项。</li>
<li><code>FILE</code>：指定一个或多个要排序的文件。如果没有指定文件或指定为<code>-</code>，则读取标准输入。</li>
</ul>
<h3 id="常见选项-4"><a href="#常见选项-4" class="headerlink" title="常见选项"></a>常见选项</h3><ul>
<li><code>-n</code>：根据数值进行排序。</li>
<li><code>-r</code>：倒序排序。</li>
<li><code>-k</code>：指定按照哪一列或字段排序。</li>
<li><code>-t</code>：指定字段之间的分隔符，默认是空白字符。</li>
<li><code>-u</code>：删除重复的行，只保留唯一行。</li>
<li><code>-o</code>：指定输出文件。</li>
</ul>
<h3 id="示例-5"><a href="#示例-5" class="headerlink" title="示例"></a>示例</h3><ol>
<li><strong>按字母排序</strong><br>对文件 <code>file.txt</code> 的内容进行字母排序：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> file.txt</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>按数值排序</strong><br>对数值进行排序：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> -n numbers.txt</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>倒序排序</strong><br>对文件进行倒序排序：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> -r file.txt</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><strong>按特定列排序</strong><br>根据第二列的数值进行排序：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> -k2 -n file.txt</span><br></pre></td></tr></table></figure>

<ol start="5">
<li><strong>使用自定义分隔符</strong><br>当列由特定字符分隔时，使用 <code>-t</code> 选项指定分隔符。例如，使用冒号分隔：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> -t: -k3 file.txt</span><br></pre></td></tr></table></figure>

<ol start="6">
<li><strong>删除排序过程中的重复行</strong><br>在排序时去除重复行：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> -u file.txt</span><br></pre></td></tr></table></figure>

<ol start="7">
<li><strong>将排序结果输出到文件</strong><br>将排序结果直接输出到另一个文件：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> file.txt -o sorted_file.txt</span><br></pre></td></tr></table></figure>

<ol start="8">
<li><strong>结合多个排序标准</strong><br>先按第一列字母排序，再按第二列的数值逆序排序：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> -k1,1 -k2,2nr file.txt</span><br></pre></td></tr></table></figure>

<h2 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h2><p><code>cut</code>命令是Linux和Unix系统中用于文本处理的非常有用的工具。它袽用来提取文本文件中的列或字段。你可以指定一个分隔符，该分隔符将每行文本分隔成多个字段。默认情况下，<code>cut</code>命令用制表符作为字段分隔符，但你可以通过<code>-d</code>选项指定不同的字符。<code>cut</code>最常见的用法包括提取文件中特定的列或列范围。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p><code>cut</code>命令的基本语法如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut OPTION... [FILE]...</span><br></pre></td></tr></table></figure>

<p>其中，<code>OPTION</code>可以是多种选项的组合，用来指定如何选择字段和字符，<code>[FILE]...</code>是一个或多个文件名参数。如果没有指定文件名，或者文件名是<code>-</code>，<code>cut</code>命令会从标准输入读取数据。</p>
<h3 id="主要选项"><a href="#主要选项" class="headerlink" title="主要选项"></a>主要选项</h3><ul>
<li><code>-d DELIMITER</code>：指定字段分隔符，默认是制表符。这允许你指定任何字符作为字段分隔符。</li>
<li><code>-f FIELDS</code>：选择由<code>-d</code>选项指定的分隔符分隔的字段。你可以指定一个字段编号、一个字段范围（例如，<code>2-5</code>表示第2到第5个字段），或者这两种的组合。</li>
<li><code>-c LIST</code>：选择字符（而非字段）。和<code>-f</code>一样，你可以指定一个字符位置、一个范围或两者的组合。</li>
<li><code>-b LIST</code>：同<code>-c</code>，但选择的是字节位置。这在处理多字节字符时会有所不同。</li>
</ul>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><ol>
<li><strong>提取第一列：</strong></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut -d&#x27;,&#x27; -f1 file.txt</span><br></pre></td></tr></table></figure>

<p>这个命令提取<code>file.txt</code>中每行的第一字段，假定字段由逗号分隔。</p>
<ol start="2">
<li><strong>提取多列：</strong></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut -d&#x27; &#x27; -f1,3,5 file.txt</span><br></pre></td></tr></table></figure>

<p>这个命令提取由空格分隔的第1、第3和第5个字段。</p>
<ol start="3">
<li><strong>提取范围内的列：</strong></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut -d&#x27;:&#x27; -f2-4 file.txt</span><br></pre></td></tr></table></figure>

<p>如果<code>file.txt</code>中的字段由冒号分隔，这个命令会提取第2到第4列。</p>
<ol start="4">
<li><strong>提取字符：</strong></li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut -c1-10 file.txt</span><br></pre></td></tr></table></figure>

<p>这个命令提取每一行的前10个字符。</p>
<ol start="5">
<li><strong>组合字段和字符范围：</strong></li>
</ol>
<p>有时候，你可能需要组合使用字段和字符选项，但<code>cut</code>命令不支持这样做。在这种情况下，你通常会将<code>cut</code>命令与其他文本处理工具（比如<code>awk</code>或<code>sed</code>）结合使用。</p>
<h3 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h3><ul>
<li>如果指定的字段不存在，<code>cut</code>命令不会输出错误，相反，对于那一行，什么都不会输出。</li>
<li>如果输入包含不规则的行，比如某些行缺少某些字段，结果可能会让人困惑。在这种情况下，使用<code>awk</code>可能会更灵活。</li>
</ul>
<p><code>cut</code>命令是文本处理工具箱中的一个简单但强大的工具，适用于快速的文本列提取任务。掌握它对于日常处理文本数据来说非常有用。</p>
<h1 id="组合使用"><a href="#组合使用" class="headerlink" title="组合使用"></a>组合使用</h1><h2 id="常见组合"><a href="#常见组合" class="headerlink" title="常见组合"></a>常见组合</h2><h3 id="1-统计文件中最常出现的单词"><a href="#1-统计文件中最常出现的单词" class="headerlink" title="1. 统计文件中最常出现的单词"></a>1. 统计文件中最常出现的单词</h3><p>这个任务可以通过组合使用 <code>awk</code>、<code>sort</code>、<code>uniq</code> 和 <code>wc</code> 实现。</p>
<ol>
<li>使用 <code>awk</code> 提取所有单词。</li>
<li>使用 <code>sort</code> 对单词进行排序。</li>
<li>使用 <code>uniq -c</code> 对排序后的单词进行去重，并计数。</li>
<li>使用 <code>sort -nr</code> 再次对结果进行数值排序。</li>
<li>使用 <code>head</code> 获取出现次数最多的前 N 个单词。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;for(i=1;i&lt;=NF;i++) print $i&#125;&#x27;</span> file.txt | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -nr | <span class="built_in">head</span> -n 10</span><br></pre></td></tr></table></figure>



<p>这个命令序列假定文件中的单词已经通过空格进行分隔。</p>
<h3 id="2-统计特定类型文件的行数"><a href="#2-统计特定类型文件的行数" class="headerlink" title="2. 统计特定类型文件的行数"></a>2. 统计特定类型文件的行数</h3><p>如果你想统计当前目录下所有 <code>.txt</code> 文件的行数，可以使用以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> *.txt | <span class="built_in">wc</span> -l</span><br></pre></td></tr></table></figure>



<p>透过 <code>cat *.txt</code> 将所有 <code>.txt</code> 文件的内容送入 <code>wc -l</code> 来计算总行数。</p>
<h3 id="3-提取并统计每个独立IP地址的访问次数"><a href="#3-提取并统计每个独立IP地址的访问次数" class="headerlink" title="3. 提取并统计每个独立IP地址的访问次数"></a>3. 提取并统计每个独立IP地址的访问次数</h3><p>假设你有一个日志文件 <code>access.log</code>，每行包含一个 IP 地址，代表一个访问请求，你想知道每个 IP 地址分别访问了多少次。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> access.log | <span class="built_in">sort</span> | <span class="built_in">uniq</span> -c | <span class="built_in">sort</span> -nr</span><br></pre></td></tr></table></figure>



<p>在这个例子中，<code>awk &#39;&#123;print $1&#125;&#39;</code> 假设 IP 地址位于每行的第一列。如果实际情况不同，请相应地调整列的编号。</p>
<h3 id="4-检查哪些行是唯一的"><a href="#4-检查哪些行是唯一的" class="headerlink" title="4. 检查哪些行是唯一的"></a>4. 检查哪些行是唯一的</h3><p>如果你想知道文件 <code>file.txt</code> 中哪些行是唯一的，可以使用：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> file.txt | <span class="built_in">uniq</span> -u</span><br></pre></td></tr></table></figure>



<p>这会列出所有只出现一次的行。</p>
<h3 id="5-计算多个文件中不同单词的总数"><a href="#5-计算多个文件中不同单词的总数" class="headerlink" title="5. 计算多个文件中不同单词的总数"></a>5. 计算多个文件中不同单词的总数</h3><p>对于多个文本文件，如果你想知道包含的不同单词总数，可以用：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> file1.txt file2.txt | <span class="built_in">tr</span> <span class="string">&#x27; &#x27;</span> <span class="string">&#x27;\n&#x27;</span> | <span class="built_in">sort</span> | <span class="built_in">uniq</span> | <span class="built_in">wc</span> -l</span><br></pre></td></tr></table></figure>



<p>这里，<code>tr &#39; &#39; &#39;\n&#39;</code> 是用来将空格替换为换行符，从而让每个单词单独占一行，方便后续的 <code>sort</code>、<code>uniq</code> 和 <code>wc</code> 处理。</p>
<h2 id="find-grep"><a href="#find-grep" class="headerlink" title="find+grep"></a>find+grep</h2><p><code>find</code> 用于查找满足条件的文件和目录，而 <code>grep</code> 用于搜索文件内容。</p>
<h3 id="基本示例"><a href="#基本示例" class="headerlink" title="基本示例"></a>基本示例</h3><p>在目录及其所有子目录中查找包含”search_pattern”的所有<code>.txt</code>文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/directory -<span class="built_in">type</span> f -name <span class="string">&quot;*.txt&quot;</span> -<span class="built_in">exec</span> grep <span class="string">&quot;search_pattern&quot;</span> &#123;&#125; +</span><br></pre></td></tr></table></figure>



<p>这个命令解释如下：</p>
<ul>
<li><code>/path/to/directory</code>：你要搜索的目录路径。</li>
<li><code>-type f</code>：表示你只对文件感兴趣。</li>
<li><code>-name &quot;*.txt&quot;</code>：指定文件名模式，只搜索.txt文件。</li>
<li><code>-exec grep &quot;search_pattern&quot; &#123;&#125; +</code>：对所有找到的文件执行<code>grep &quot;search_pattern&quot;</code>。<code>&#123;&#125;</code>是一个占位符，代表 <code>find</code> 找到的文件名。<code>+</code>表示将所有找到的文件名一次性传递给 <code>grep</code>。</li>
</ul>
<h3 id="只打印包含文本的文件名"><a href="#只打印包含文本的文件名" class="headerlink" title="只打印包含文本的文件名"></a>只打印包含文本的文件名</h3><p>如果你只想打印出包含”search_pattern”的<code>.log</code>文件名称，而不显示匹配的行，可以使用<code>-l</code>选项（小写的L）：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/directory -<span class="built_in">type</span> f -name <span class="string">&quot;*.log&quot;</span> -<span class="built_in">exec</span> grep -l <span class="string">&quot;search_pattern&quot;</span> &#123;&#125; +</span><br></pre></td></tr></table></figure>



<h3 id="搜索多种文件类型"><a href="#搜索多种文件类型" class="headerlink" title="搜索多种文件类型"></a>搜索多种文件类型</h3><p>可以组合使用多个<code>-name</code>选项，通过<code>-o</code>（或逻辑）将它们连接起来，用来搜索多种类型的文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/directory -<span class="built_in">type</span> f \( -name <span class="string">&quot;*.txt&quot;</span> -o -name <span class="string">&quot;*.log&quot;</span> \) -<span class="built_in">exec</span> grep <span class="string">&quot;search_pattern&quot;</span> &#123;&#125; +</span><br></pre></td></tr></table></figure>



<h3 id="使用xargs来提高效率"><a href="#使用xargs来提高效率" class="headerlink" title="使用xargs来提高效率"></a>使用xargs来提高效率</h3><p>对于文件数目非常多的情况，使用<code>xargs</code>可能会更高效：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/directory -<span class="built_in">type</span> f -name <span class="string">&quot;*.txt&quot;</span> | xargs grep <span class="string">&quot;search_pattern&quot;</span></span><br></pre></td></tr></table></figure>



<p><code>xargs</code> 接收 <code>find</code> 的输出作为输入，然后将这些输入作为参数传递给 <code>grep</code>。这种方法特别有用，因为它避免了 <code>grep</code> 命令的可能重复启动。</p>
<h3 id="排除特定目录"><a href="#排除特定目录" class="headerlink" title="排除特定目录"></a>排除特定目录</h3><p>如果你想排除搜索中的一个或多个特定目录，可以使用 <code>-prune</code> 选项。例如，排除名为 <code>.git</code> 的目录：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find /path/to/directory -<span class="built_in">type</span> d -name .git -prune -o -<span class="built_in">type</span> f -name <span class="string">&quot;*.txt&quot;</span> -<span class="built_in">exec</span> grep <span class="string">&quot;search_pattern&quot;</span> &#123;&#125; +</span><br></pre></td></tr></table></figure>



<p>在使用 <code>find</code> 和 <code>grep</code> 的组合时，根据具体的搜索需求调整选项和参数是很重要的，这些强大的工具组合为文件内容的搜索和处理提供了极大的灵活性。</p>
<h2 id="sort-uniq"><a href="#sort-uniq" class="headerlink" title="sort+uniq"></a>sort+uniq</h2><ol>
<li><strong>检测重复行</strong><br>只显示文件中的重复行：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> file.txt | <span class="built_in">uniq</span> -d</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>计数每行出现的次数</strong><br>对文件排序后，计数每行出现的次数：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> file.txt | <span class="built_in">uniq</span> -c</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>显示唯一的行</strong><br>显示文件中唯一的行：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> file.txt | <span class="built_in">uniq</span> -u</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><strong>忽略大小写比较重复的行</strong><br>在进行重复行检测时忽略大小写：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> file.txt | <span class="built_in">uniq</span> -i -d</span><br></pre></td></tr></table></figure>

<ol start="5">
<li><strong>组合</strong><code>sort和uniq</code><strong>进行去重</strong><br>将排序和去重合并输出到另一个文件：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> file.txt | <span class="built_in">uniq</span> &gt; sorted_unique_file.txt</span><br></pre></td></tr></table></figure>

<ol start="6">
<li><strong>使用自定义输出</strong><br>检测重复行并将结果输出到指定文件：</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sort</span> file.txt | <span class="built_in">uniq</span> -d -o output.txt</span><br></pre></td></tr></table></figure>


<p>注意：<code>-o</code> 选项实际上并不存在于 <code>uniq</code> 命令中。输出通常是通过重定向完成的，上面的命令应该修正为没有 <code>-o</code> 的版本，直接使用 <code>&gt;</code> 进行重定向。 </p>
<p><code>uniq</code> 命令的强大之处在于其简便性和与<code>sort</code>命令结合使用时的效能。了解如何有效使用这些工具，可以极大提高你的文本处理能力，特别是在处理大型数据集时。</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%BA%94%E6%80%A5%E5%B7%A5%E5%85%B7/" rel="tag"># 应急工具</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2024/01/13/%E6%94%BB%E5%87%BB%E6%BA%AF%E6%BA%90/" rel="prev" title="流量分析">
      <i class="fa fa-chevron-left"></i> 流量分析
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8D%95%E7%8B%AC%E5%B7%A5%E5%85%B7%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.</span> <span class="nav-text">单独工具介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Find"><span class="nav-number">1.1.</span> <span class="nav-text">Find</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95"><span class="nav-number">1.1.1.</span> <span class="nav-text">基本语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E9%80%89%E9%A1%B9"><span class="nav-number">1.1.2.</span> <span class="nav-text">常见选项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B"><span class="nav-number">1.1.3.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#grep"><span class="nav-number">1.2.</span> <span class="nav-text">grep</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-1"><span class="nav-number">1.2.1.</span> <span class="nav-text">基本语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9"><span class="nav-number">1.2.2.</span> <span class="nav-text">常用选项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B-1"><span class="nav-number">1.2.3.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#wc"><span class="nav-number">1.3.</span> <span class="nav-text">wc</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-2"><span class="nav-number">1.3.1.</span> <span class="nav-text">基本语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E9%80%89%E9%A1%B9-1"><span class="nav-number">1.3.2.</span> <span class="nav-text">常见选项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B-2"><span class="nav-number">1.3.3.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#awk"><span class="nav-number">1.4.</span> <span class="nav-text">awk</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-3"><span class="nav-number">1.4.1.</span> <span class="nav-text">基本语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E9%80%89%E9%A1%B9-2"><span class="nav-number">1.4.2.</span> <span class="nav-text">常见选项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B-3"><span class="nav-number">1.4.3.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#uniq"><span class="nav-number">1.5.</span> <span class="nav-text">uniq</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-4"><span class="nav-number">1.5.1.</span> <span class="nav-text">基本语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E9%80%89%E9%A1%B9-3"><span class="nav-number">1.5.2.</span> <span class="nav-text">常见选项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B-4"><span class="nav-number">1.5.3.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Sort"><span class="nav-number">1.6.</span> <span class="nav-text">Sort</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95-5"><span class="nav-number">1.6.1.</span> <span class="nav-text">基本语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E9%80%89%E9%A1%B9-4"><span class="nav-number">1.6.2.</span> <span class="nav-text">常见选项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B-5"><span class="nav-number">1.6.3.</span> <span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#cut"><span class="nav-number">1.7.</span> <span class="nav-text">cut</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95"><span class="nav-number">1.7.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BB%E8%A6%81%E9%80%89%E9%A1%B9"><span class="nav-number">1.7.2.</span> <span class="nav-text">主要选项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B"><span class="nav-number">1.7.3.</span> <span class="nav-text">实例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="nav-number">1.7.4.</span> <span class="nav-text">注意事项</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BB%84%E5%90%88%E4%BD%BF%E7%94%A8"><span class="nav-number">2.</span> <span class="nav-text">组合使用</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%BB%84%E5%90%88"><span class="nav-number">2.1.</span> <span class="nav-text">常见组合</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E7%BB%9F%E8%AE%A1%E6%96%87%E4%BB%B6%E4%B8%AD%E6%9C%80%E5%B8%B8%E5%87%BA%E7%8E%B0%E7%9A%84%E5%8D%95%E8%AF%8D"><span class="nav-number">2.1.1.</span> <span class="nav-text">1. 统计文件中最常出现的单词</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E7%BB%9F%E8%AE%A1%E7%89%B9%E5%AE%9A%E7%B1%BB%E5%9E%8B%E6%96%87%E4%BB%B6%E7%9A%84%E8%A1%8C%E6%95%B0"><span class="nav-number">2.1.2.</span> <span class="nav-text">2. 统计特定类型文件的行数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%8F%90%E5%8F%96%E5%B9%B6%E7%BB%9F%E8%AE%A1%E6%AF%8F%E4%B8%AA%E7%8B%AC%E7%AB%8BIP%E5%9C%B0%E5%9D%80%E7%9A%84%E8%AE%BF%E9%97%AE%E6%AC%A1%E6%95%B0"><span class="nav-number">2.1.3.</span> <span class="nav-text">3. 提取并统计每个独立IP地址的访问次数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%A3%80%E6%9F%A5%E5%93%AA%E4%BA%9B%E8%A1%8C%E6%98%AF%E5%94%AF%E4%B8%80%E7%9A%84"><span class="nav-number">2.1.4.</span> <span class="nav-text">4. 检查哪些行是唯一的</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E8%AE%A1%E7%AE%97%E5%A4%9A%E4%B8%AA%E6%96%87%E4%BB%B6%E4%B8%AD%E4%B8%8D%E5%90%8C%E5%8D%95%E8%AF%8D%E7%9A%84%E6%80%BB%E6%95%B0"><span class="nav-number">2.1.5.</span> <span class="nav-text">5. 计算多个文件中不同单词的总数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#find-grep"><span class="nav-number">2.2.</span> <span class="nav-text">find+grep</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%A4%BA%E4%BE%8B"><span class="nav-number">2.2.1.</span> <span class="nav-text">基本示例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%AA%E6%89%93%E5%8D%B0%E5%8C%85%E5%90%AB%E6%96%87%E6%9C%AC%E7%9A%84%E6%96%87%E4%BB%B6%E5%90%8D"><span class="nav-number">2.2.2.</span> <span class="nav-text">只打印包含文本的文件名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%90%9C%E7%B4%A2%E5%A4%9A%E7%A7%8D%E6%96%87%E4%BB%B6%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.2.3.</span> <span class="nav-text">搜索多种文件类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8xargs%E6%9D%A5%E6%8F%90%E9%AB%98%E6%95%88%E7%8E%87"><span class="nav-number">2.2.4.</span> <span class="nav-text">使用xargs来提高效率</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%92%E9%99%A4%E7%89%B9%E5%AE%9A%E7%9B%AE%E5%BD%95"><span class="nav-number">2.2.5.</span> <span class="nav-text">排除特定目录</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sort-uniq"><span class="nav-number">2.3.</span> <span class="nav-text">sort+uniq</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Zhou muyun"
      src="/images/avatar2.gif">
  <p class="site-author-name" itemprop="name">Zhou muyun</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">28</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Liuxunzhang" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Liuxunzhang" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:liuxunzhang1@gmail.com" title="E-Mail → mailto:liuxunzhang1@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhou muyun</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
